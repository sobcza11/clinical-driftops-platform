name: DriftOps CI â€“ Drift Report & Metrics
- 'data/**'
- 'requirements.txt'
- '.github/workflows/driftops-ci.yml'
pull_request:
paths:
- 'src/**'
- 'requirements.txt'


jobs:
build-and-check:
runs-on: ubuntu-latest


steps:
- name: Checkout
uses: actions/checkout@v4


- name: Set up Python
uses: actions/setup-python@v5
with:
python-version: '3.11'


- name: Cache pip
uses: actions/cache@v4
with:
path: ~/.cache/pip
key: ${{ runner.os }}-pip-${{ hashFiles('requirements.txt') }}


- name: Install deps
run: |
python -m pip install --upgrade pip
pip install -r requirements.txt
pip install pytest


- name: Run unit tests
run: pytest -q


- name: Generate metrics CSV (PSI/KS)
run: |
python -m src.monitors.drift_detector --baseline data/data_prepared_baseline.csv --current data/data_prepared_current.csv


- name: Build Evidently HTML report
env:
DRIFTOPS_BASELINE_PATH: data/data_prepared_baseline.csv
DRIFTOPS_CURRENT_PATH: data/data_prepared_current.csv
DRIFTOPS_REPORT_PATH: reports/data_drift_small_demo.html
run: |
python -m src.make_small_drift_report


- name: Upload artifacts
uses: actions/upload-artifact@v4
with:
name: driftops-artifacts
path: |
reports/data_drift_small_demo.html
reports/drift_metrics.csv